<div class="h-full flex flex-col bg-transparent">
    <!-- Messages Area -->
    <div class="flex-1 overflow-y-auto p-8 space-y-6 scroll-smooth custom-scrollbar">
        <div *ngFor="let msg of messages" class="flex gap-5 group"
            [ngClass]="{'flex-row-reverse': msg.sender === 'user'}">

            <!-- Avatar -->
            <div class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 mt-1 shadow-inner border border-white"
                [ngClass]="{
                    'bg-gradient-to-br from-slate-100 to-slate-200 text-slate-500': msg.sender === 'user',
                    'bg-gradient-to-br from-[#E1F5FE] to-[#B3E5FC] text-[#007399]': msg.sender === 'ai'
                }">
                <i class="fas" [ngClass]="msg.sender === 'user' ? 'fa-user' : 'fa-robot'"></i>
            </div>

            <!-- Message Bubble -->
            <div class="p-6 rounded-3xl shadow-[0_4px_20px_rgba(0,0,0,0.03)] border max-w-[85%] leading-relaxed transition-all"
                [ngClass]="{
                    'bg-gradient-to-br from-[#00AEEF] to-[#009bd6] text-white rounded-tr-none shadow-[0_10px_30px_rgba(0,174,239,0.3)] border-[#009bd6]/20': msg.sender === 'user',
                    'bg-white border-slate-100 text-slate-600 rounded-tl-none group-hover:shadow-[0_4px_25px_rgba(0,174,239,0.1)]': msg.sender === 'ai'
                }">

                <p *ngIf="msg.sender === 'ai'"
                    class="mb-2 font-semibold text-[#007399] text-xs uppercase tracking-wider">Bina-IA</p>

                {{ msg.text }}
            </div>
        </div>
    </div>

    <!-- Input Area -->
    <div class="p-6 bg-white/60 backdrop-blur-md border-t border-slate-100/50">
        <div class="relative group">
            <div
                class="absolute -inset-0.5 bg-gradient-to-r from-[#00AEEF] to-[#4DD0E1] rounded-full blur opacity-20 group-hover:opacity-40 transition duration-500">
            </div>

            <input [(ngModel)]="newMessage" (keyup.enter)="sendMessage()" type="text"
                placeholder="Escribe tu consulta legal aquí..."
                class="relative w-full py-5 pl-8 pr-16 rounded-full bg-white border-0 shadow-lg text-slate-600 focus:outline-none focus:ring-0 placeholder:text-slate-400 text-lg">

            <button (click)="sendMessage()"
                class="absolute right-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-gradient-to-r from-[#00AEEF] to-[#009bd6] text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-[#00AEEF]/50 hover:scale-105 transition-all duration-300">
                <i class="fas fa-paper-plane text-lg"></i>
            </button>
        </div>
        <p class="text-center text-[10px] text-slate-400 mt-3">La IA puede cometer errores. Verifica la información
            importante.</p>
    </div>
</div>